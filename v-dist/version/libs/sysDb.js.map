{
  "version": 3,
  "sources": [
    "sysDb.js"
  ],
  "names": [
    "sysDb",
    "module",
    "exports",
    "config",
    "app",
    "libs",
    "connectionSystem",
    "sequlise",
    "aplos",
    "database",
    "username",
    "password",
    "params",
    "sequelize",
    "models",
    "dir",
    "join",
    "__dirname",
    "readdirSync",
    "forEach",
    "modelDir",
    "file",
    "model",
    "import",
    "name",
    "Object",
    "keys",
    "key",
    "associate"
  ],
  "mappings": ";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,QAAQ,IAAZ;;AAEAC,OAAOC,OAAP,GAAiB,eAAO;AACpB,QAAMC,SAASC,IAAIC,IAAJ,CAASF,MAAT,CAAgBG,gBAA/B;;AAEA,QAAI,CAACN,KAAL,EAAY;AACRA,gBAAQ,EAAR;;AAEA,YAAMO,WAAW,wBACbJ,OAAOK,KAAP,CAAaC,QADA,EAEbN,OAAOK,KAAP,CAAaE,QAFA,EAGbP,OAAOK,KAAP,CAAaG,QAHA,EAIbR,OAAOK,KAAP,CAAaI,MAJA,CAAjB;;AAOAZ,gBAAQ;AACJa,uBAAWN,QADP;AAEJO,oBAAQ;AAFJ,SAAR;;AAMA,YAAMC,MAAM,eAAKC,IAAL,CAAUC,SAAV,yBAAZ;;AAEA,qBAAGC,WAAH,CAAeH,GAAf,EAAoBI,OAApB,CAA4B,gBAAQ;AAChC,gBAAMC,WAAW,eAAKJ,IAAL,CAAUD,GAAV,EAAeM,IAAf,CAAjB;AACA,gBAAMC,QAAQtB,MAAMa,SAAN,CAAgBU,MAAhB,CAAuBH,QAAvB,CAAd;;AAEApB,kBAAMc,MAAN,CAAaQ,MAAME,IAAnB,IAA2BF,KAA3B;AACH,SALD;;AAOAG,eAAOC,IAAP,CAAY1B,MAAMc,MAAlB,EAA0BK,OAA1B,CAAkC,eAAO;AACrCnB,kBAAMc,MAAN,CAAaa,GAAb,EAAkBC,SAAlB,CAA4B5B,MAAMc,MAAlC;AACH,SAFD;AAGH;;AAED,WAAOd,KAAP;AACH,CAlCD",
  "file": "sysDb.js",
  "sourceRoot": "../../build/libs",
  "sourcesContent": [
    "import fs from \"fs\";\nimport path from \"path\";\nimport Sequelize from \"sequelize\";\n\nlet sysDb = null;\n\nmodule.exports = app => {\n    const config = app.libs.config.connectionSystem\n\n    if (!sysDb) {\n        sysDb = {};\n\n        const sequlise = new Sequelize(\n            config.aplos.database,\n            config.aplos.username,\n            config.aplos.password,\n            config.aplos.params,    \n        );\n\n        sysDb = {\n            sequelize: sequlise,\n            models: {},\n        }\n\n\n        const dir = path.join(__dirname, `../app/models/system`);\n\n        fs.readdirSync(dir).forEach(file => {\n            const modelDir = path.join(dir, file);\n            const model = sysDb.sequelize.import(modelDir);\n\n            sysDb.models[model.name] = model;\n        });\n\n        Object.keys(sysDb.models).forEach(key => {\n            sysDb.models[key].associate(sysDb.models);\n        });\n    }\n    \n    return sysDb;\n}\n"
  ]
}
